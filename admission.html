<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admission Form - GPS Pethgam Wagoora</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --primary: #1b5e20; --border: #000; }
        body { font-family: 'Arial', sans-serif; background: #f0f0f0; padding: 10px; font-size: 12px; }
        .form-page { max-width: 950px; margin: auto; background: white; padding: 25px; border: 2px solid #000; box-sizing: border-box; }
        
        /* Layout Grid to prevent overlapping */
        .header-container { display: grid; grid-template-columns: 1fr 150px; gap: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
        .header-text { text-align: center; }
        .header-text h1 { margin: 0; font-size: 20px; text-transform: uppercase; }
        
        .photo-box { width: 130px; height: 160px; border: 1px solid #000; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; background: #f9f9f9; cursor: pointer; overflow: hidden; }
        .photo-box img { width: 100%; height: 100%; object-fit: cover; display: none; }

        .field-row { display: flex; align-items: center; margin-bottom: 12px; gap: 8px; flex-wrap: wrap; }
        .label { font-weight: bold; white-space: nowrap; min-width: 130px; }
        .dotted-input { border: none; border-bottom: 1px dotted #000; flex: 1; padding: 2px; outline: none; background: transparent; }
        
        /* Character Boxes */
        .box-container { display: flex; flex-wrap: wrap; }
        .char-box { width: 18px; height: 18px; border: 1px solid #000; margin-right: -1px; margin-bottom: 2px; }
        .char-box input { width: 100%; height: 100%; border: none; text-align: center; text-transform: uppercase; font-size: 11px; }

        .section-head { font-weight: bold; text-decoration: underline; margin: 20px 0 10px 0; background: #eee; padding: 5px; text-transform: uppercase; }
        .doc-upload-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; background: #fafafa; padding: 15px; border: 1px dashed #666; }
        
        .apaar-consent-box { border: 1px solid #000; padding: 15px; margin-top: 20px; background: #fdfdfd; line-height: 1.5; }
        
        .btn-footer { margin-top: 30px; display: flex; justify-content: space-between; align-items: center; }
        .btn { padding: 12px 25px; border: none; cursor: pointer; color: white; font-weight: bold; border-radius: 4px; font-size: 14px; }
        .btn-submit { background: var(--primary); }
    </style>
</head>
<body>

<div class="form-page">
    <div class="header-container">
        <div class="header-text">
            <h1>Government Primary School Pethgam Wagoora</h1>
            <p>Wagoora Babareshi Road Near Zonal Education Office Wagoora</p>
            <p>UDISE Code: 01022202207 | Email: pspethgam@gmail.com</p>
            <div style="font-size: 18px; font-weight: bold; margin-top: 10px; text-decoration: underline;">ADMISSION FORM</div>
        </div>
        <div class="photo-box" onclick="document.getElementById('photoInput').click()">
            <span id="photoLabel">Affix Student <br> Passport Photo</span>
            <img id="preview">
            <input type="file" id="photoInput" hidden accept="image/*" onchange="previewImage(this)">
        </div>
    </div>

    <form id="admissionForm">
        <div class="section-head">Student Identity</div>
        <div class="field-row">
            <span class="label">Student's Name:</span>
            <div class="box-container" id="nameBoxes"></div>
        </div>

        <div class="field-row">
            <span class="label">Name (As per Aadhaar):</span>
            <div class="box-container" id="aadhaarNameBoxes"></div>
        </div>

        <div class="field-row">
            <span class="label">Father's Name:</span>
            <input type="text" class="dotted-input" name="fatherName">
            <span class="label" style="min-width: 80px;">Mother's Name:</span>
            <input type="text" class="dotted-input" name="motherName">
        </div>

        <div class="section-head">Residential Address</div>
        <div class="field-row">
            <span class="label">Mohallah/Village:</span>
            <input type="text" class="dotted-input" name="mohallah">
            <span class="label" style="min-width: 50px;">Tehsil:</span>
            <input type="text" class="dotted-input" name="tehsil">
        </div>
        <div class="field-row">
            <span class="label">District:</span>
            <input type="text" class="dotted-input" name="district" value="Baramulla">
            <span class="label" style="min-width: 50px;">PIN Code:</span>
            <input type="text" class="dotted-input" name="pincode" value="193109">
        </div>

        <div class="section-head">Contact & Identifiers</div>
        <div class="field-row">
            <span class="label">Aadhaar Number:</span>
            <div class="box-container" id="aadhaarNumBoxes"></div>
            <span class="label" style="min-width: 80px; margin-left:10px;">DOB:</span>
            <input type="date" name="dob" style="border:1px solid #000;">
        </div>

        <div class="field-row">
            <span class="label">Class Joining:</span>
            <select name="sclass" required style="padding: 3px; border:1px solid #000;">
                <option value="">--Select--</option>
                <option>Pre-Primary 3</option>
                <option>Pre-Primary 2</option>
                <option>Balvatika</option>
                <option>1st</option><option>2nd</option><option>3rd</option><option>4th</option><option>5th</option>
            </select>
            <span class="label" style="min-width: 80px; margin-left:10px;">PEN Number:</span>
            <input type="text" class="dotted-input" name="penNumber" placeholder="For Transfer Cases">
        </div>

        <div class="field-row">
            <span class="label">APAAR ID:</span>
            <input type="text" class="dotted-input" name="apaarId">
            <span class="label" style="min-width: 80px; margin-left:10px;">Blood Group:</span>
            <input type="text" class="dotted-input" name="bloodGroup" style="max-width: 60px;">
        </div>

        <div class="section-head">ðŸ“Ž Document Upload (Mandatory for Fresh)</div>
        <div class="doc-upload-grid">
            <div><label>1. Birth Certificate:</label><br><input type="file" name="docBirth" required></div>
            <div><label>2. Blood Group Report:</label><br><input type="file" name="docBlood" required></div>
            <div><label>3. Aadhaar Card (Student):</label><br><input type="file" name="docAadhaar" required></div>
        </div>

        <div class="apaar-consent-box">
            <h3 style="text-align: center; margin-top: 0;">Consent for APAAR ID Generation</h3>
            <p style="font-size: 11px;">
                I hereby voluntarily give my consent to share the Aadhaar Number and demographic information of my child with the Ministry of Education for the sole purpose of creation of <strong>APAAR ID</strong> and opening of <strong>DIGILOCKER</strong> account. I understand that this information will be kept confidential as per the Aadhaar Act 2016.
            </p>
            <div style="margin-top: 10px;">
                <input type="checkbox" id="consentCheck" required> 
                <label for="consentCheck" style="font-weight: bold;">I Accept the terms and provide digital consent for APAAR ID generation.</label>
            </div>
        </div>

        <div class="btn-footer">
            <p style="font-size: 10px; color: #666;">* Form will be saved to Online Register automatically.</p>
            <button type="button" class="btn btn-submit" onclick="finalSubmit()">Final Submit & Save Admission</button>
        </div>
    </form>
</div>

<script>
    function createBoxes(id, count) {
        const container = document.getElementById(id);
        for(let i=0; i<count; i++) {
            const div = document.createElement('div');
            div.className = 'char-box';
            div.innerHTML = '<input type="text" maxlength="1">';
            container.appendChild(div);
        }
    }

    window.onload = () => {
        createBoxes('nameBoxes', 35);
        createBoxes('aadhaarNameBoxes', 35);
        createBoxes('aadhaarNumBoxes', 12);
    };

    function previewImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => {
                const preview = document.getElementById('preview');
                preview.src = e.target.result;
                preview.style.display = 'block';
                document.getElementById('photoLabel').style.display = 'none';
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function finalSubmit() {
        const form = document.getElementById('admissionForm');
        if(!form.checkValidity()) {
            alert("Please fill all required fields and accept the APAAR consent.");
            return;
        }

        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        
        // Save to Register logic
        let register = JSON.parse(localStorage.getItem('admissionData')) || [];
        register.push({ ...data, timestamp: new Date().toLocaleString(), status: "Submitted" });
        localStorage.setItem('admissionData', JSON.stringify(register));

        alert("Admission & APAAR Consent saved successfully!");
        window.location.href = 'adm-register.html';
    }
</script>
</body>
</html>

        
