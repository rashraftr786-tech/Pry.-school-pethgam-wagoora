<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admission Form - GPS Pethgam Wagoora</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --primary: #1b5e20; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); padding: 20px; }
        .form-container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 5px solid var(--primary); }
        .header-box { text-align: center; border-bottom: 2px solid var(--primary); padding-bottom: 10px; margin-bottom: 20px; }
        .section-title { background: #e8f5e9; color: var(--primary); padding: 10px; font-weight: bold; margin: 20px 0 15px 0; border-left: 5px solid var(--primary); }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .full-width { grid-column: span 2; }
        label { display: block; font-weight: 600; margin-bottom: 5px; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .btn-group { margin-top: 30px; display: flex; gap: 10px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; transition: 0.3s; }
        .btn-save { background: var(--primary); }
        .btn-pdf { background: #d32f2f; }
        @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } .full-width { grid-column: span 1; } }
    </style>
</head>
<body>

<div class="form-container">
    <div class="header-box">
        <img src="logo.png" alt="School Logo" style="width: 70px;">
        <h2 style="margin: 5px 0;">Government Primary School Pethgam Wagoora</h2>
        <p>Zone Wagoora ¬∑ District Baramulla ¬∑ Session 2026‚Äì2027</p>
    </div>

    <form id="admissionForm">
        <div class="section-title">üè´ SECTION 1: SCHOOL & ADMISSION DETAILS</div>
        <div class="grid">
            <div>
                <label>Admission Type</label>
                <select name="admType" required>
                    <option value="Fresh">Fresh</option>
                    <option value="Transfer">Transfer</option>
                </select>
            </div>
            <div>
                <label>Class Applied For</label>
                <select name="sclass" id="sclass" required>
                    <option value="1st">Class I</option>
                    <option value="2nd">Class II</option>
                    <option value="3rd">Class III</option>
                    <option value="4th">Class IV</option>
                    <option value="5th">Class V</option>
                    <option value="Bal-Vatika">Bal-Vatika</option>
                </select>
            </div>
            <div>
                <label>Date of Application</label>
                <input type="date" name="appDate" required>
            </div>
            <div>
                <label>Admission Form No. (Office Use)</label>
                <input type="text" name="formNo" placeholder="Leave blank if online">
            </div>
        </div>

        <div class="section-title">üëßüßí SECTION 2: STUDENT PERSONAL DETAILS</div>
        <div class="grid">
            <div class="full-width">
                <label>Student‚Äôs Full Name</label>
                <input type="text" name="sname" id="sname" required>
            </div>
            <div>
                <label>Gender</label>
                <select name="gender" required>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div>
                <label>Date of Birth</label>
                <input type="date" name="dob" required>
            </div>
            <div>
                <label>Aadhaar Number</label>
                <input type="text" name="aadhaar" maxlength="12">
            </div>
            <div>
                <label>Category</label>
                <select name="category">
                    <option value="General">General</option>
                    <option value="SC">SC</option>
                    <option value="ST">ST</option>
                    <option value="OBC">OBC</option>
                    <option value="EWS">EWS</option>
                </select>
            </div>
        </div>

        <div class="section-title">üè† SECTION 3: RESIDENTIAL ADDRESS</div>
        <div class="grid">
            <div class="full-width">
                <label>Village / Mohalla / Panchayat</label>
                <input type="text" name="address" required>
            </div>
            <div>
                <label>PIN Code</label>
                <input type="text" name="pincode" value="193109">
            </div>
            <div>
                <label>Distance from School (km)</label>
                <input type="number" step="0.1" name="distance">
            </div>
        </div>

        <div class="section-title">üë®‚Äçüë©‚Äçüëß SECTION 4: PARENT / GUARDIAN DETAILS</div>
        <div class="grid">
            <div>
                <label>Father's Name</label>
                <input type="text" name="fname" required>
            </div>
            <div>
                <label>Father's Mobile</label>
                <input type="text" name="fmobile" required>
            </div>
            <div>
                <label>Mother's Name</label>
                <input type="text" name="mname" required>
            </div>
            <div>
                <label>Mother's Mobile</label>
                <input type="text" name="mmobile">
            </div>
        </div>

        <div class="section-title">üìö SECTION 6: PREVIOUS SCHOOL DETAILS</div>
        <div class="grid">
            <div class="full-width">
                <label>Previous School Name (If any)</label>
                <input type="text" name="prevSchool">
            </div>
        </div>

        <div class="btn-group">
            <button type="button" class="btn btn-save" onclick="saveAdmission()">Submit & Update Register</button>
            <button type="button" class="btn btn-pdf" onclick="generatePDF()">Generate PDF Format</button>
        </div>
    </form>
</div>

<script src="js/guard.js"></script>
<script>
    // 1. Save to Register (LocalStorage)
    function saveAdmission() {
        const form = document.getElementById('admissionForm');
        const formData = new FormData(form);
        const student = Object.fromEntries(formData.entries());
        
        // Add ERP fields
        student.id = Date.now();
        student.status = "Pending";
        student.timestamp = new Date().toLocaleString();

        let register = JSON.parse(localStorage.getItem("admissionData")) || [];
        register.push(student);
        localStorage.setItem("admissionData", JSON.stringify(register));
        
        alert("Admission Submitted Successfully! Online Register Updated.");
    }

    // 2. Generate PDF Format
    async function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const sname = document.getElementById('sname').value || "Student";
        const sclass = document.getElementById('sclass').value;

        doc.setFontSize(18);
        doc.text("ADMISSION FORM - 2026", 105, 20, { align: "center" });
        doc.setFontSize(12);
        doc.text("Government Primary School Pethgam Wagoora", 105, 30, { align: "center" });
        
        doc.line(20, 35, 190, 35);
        
        let y = 50;
        const inputs = document.querySelectorAll("#admissionForm input, #admissionForm select");
        inputs.forEach(input => {
            if(input.value && y < 270) {
                doc.text(`${input.previousElementSibling.innerText}: ${input.value}`, 20, y);
                y += 10;
            }
        });

        doc.text("------------------------------------------------", 105, 250, { align: "center" });
        doc.text("Signature of Parent", 20, 270);
        doc.text("Seal & Sig of Headmaster", 140, 270);

        doc.save(`Admission_${sname}_${sclass}.pdf`);
    }
</script>

</body>
</html>
           
