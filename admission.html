<!DOCTYPE html>
<html>
<head>
  <title>Student Admission Form</title>
  <style>
    /* General Styles */
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 10px;
      margin: 0;
    }

    form {
      max-width: 850px; /* Widened to utilize A4 width */
      margin: auto;
      background: white;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h2, h3 {
      text-align: center;
      margin: 5px 0;
      color: darkgreen;
    }

    h3 { font-size: 1.1em; border-bottom: 1px solid #ccc; padding-bottom: 5px; }

    /* Grid Layout for compact view */
    .row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 8px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: bold;
      font-size: 11px;
      margin-bottom: 2px;
    }

    input[type="text"], input[type="date"], input[type="tel"], select, textarea {
      padding: 4px;
      font-size: 12px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }

    .photo-section {
      grid-column: span 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Print Specific Adjustments */
    @media print {
      body { background: white; padding: 0; }
      form { box-shadow: none; max-width: 100%; padding: 0; width: 100%; }
      button, input[type="file"] { display: none !important; }
      
      /* Keep previews visible */
      #photoPreview, #parentSignPreview, #inchargeSignPreview, #hmSignPreview {
        display: block !important;
      }

      .row { gap: 15px; }
      label { font-size: 10px; }
      input, select { border: 1px solid #999 !important; }

      @page {
        size: A4;
        margin: 0.5cm;
      }
    }

    button {
      margin-top: 10px;
      padding: 8px;
      background: darkgreen;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div id="printArea">
  <form id="admissionForm">
    <h2>Student Admission Form</h2>

    <div class="row">
      <div class="field-group" style="grid-column: span 2;">
        <label>Name of Student</label>
        <input type="text">
        <label>Name (As per Aadhaar)</label>
        <input type="text">
      </div>
      <div class="photo-section">
        <label>Photograph</label>
        <input type="file" id="studentPhoto" accept="image/*" onchange="previewPhoto()">
        <img id="photoPreview" style="width:80px; height:90px; border:1px solid #000; margin-top:5px; background:#eee;">
      </div>
    </div>

    <div class="row">
      <div class="field-group">
        <label>Date of Birth</label>
        <input type="date" id="dob" onchange="convertDOB()">
      </div>
      <div class="field-group" style="grid-column: span 2;">
        <label>Date of Birth (In Words)</label>
        <input type="text" id="dobWords" readonly>
      </div>
    </div>

    <div class="row">
      <div class="field-group">
        <label>Gender</label>
        <div style="font-size: 12px; display: flex; gap: 5px; align-items: center;">
          <input type="radio" name="gender" value="Male"> M
          <input type="radio" name="gender" value="Female"> F
          <input type="radio" name="gender" value="Other"> O
        </div>
      </div>
      <div class="field-group">
        <label>Class Sought</label>
        <select id="studentClass">
          <option value="">Select Class</option>
          <option>Pre-Primary (3)</option><option>Pre-Primary (2)</option><option>Balvatika</option>
          <option>Class 1</option><option>Class 2</option><option>Class 3</option>
        </select>
      </div>
      <div class="field-group">
        <label>Blood Group</label>
        <select><option>Select</option><option>A+</option><option>B+</option><option>O+</option><option>AB+</option></select>
      </div>
    </div>

    <div class="row">
      <div class="field-group"><label>Father's Name</label><input type="text"></div>
      <div class="field-group"><label>Mother's Name</label><input type="text"></div>
      <div class="field-group"><label>Category</label><select><option>Gen</option><option>OBC</option><option>SC/ST</option></select></div>
    </div>

    <div class="row">
      <div class="field-group"><label>Father's Contact</label><input type="tel"></div>
      <div class="field-group"><label>Mother's Contact</label><input type="tel"></div>
      <div class="field-group"><label>Aadhaar Number</label><input type="text"></div>
    </div>

    <div class="row">
      <div class="field-group"><label>PEN Number</label><input type="text"></div>
      <div class="field-group"><label>APAAR ID</label><input type="text"></div>
      <div class="field-group"><label>Bank Account</label><input type="text"></div>
    </div>

    <div class="row">
      <div class="field-group"><label>Bank Name</label><input type="text"></div>
      <div class="field-group"><label>IFSC Code</label><input type="text"></div>
      <div class="field-group"><label>Pin Code</label><input type="text"></div>
    </div>

    <div class="row">
      <div class="field-group"><label>Residence/Mohallah</label><input type="text"></div>
      <div class="field-group"><label>Village</label><input type="text"></div>
      <div class="field-group"><label>District</label><input type="text"></div>
    </div>

    <h3 style="color: darkred;">For Office Use Only</h3>
    <div class="row">
      <div class="field-group"><label>Admission No</label><input type="text" id="admissionNo"></div>
      <div class="field-group"><label>Date of Admission</label><input type="date" id="admissionDate"></div>
      <div class="field-group"><label>UDISE Code</label><input type="text" id="udiseCode"></div>
    </div>

    <div class="row">
      <div class="field-group" style="grid-column: span 3;">
        <label>Remarks</label>
        <textarea id="remarks" rows="1"></textarea>
      </div>
    </div>

    <div class="row" style="margin-top: 10px; border-top: 1px dashed #ccc; padding-top: 10px;">
      <div class="field-group">
        <label>Admission In-charge</label>
        <input type="file" id="inchargeSign" onchange="previewInchargeSign()">
        <img id="inchargeSignPreview" style="width:100px; height:40px; border:1px solid #eee;">
      </div>
      <div class="field-group">
        <label>Headmaster</label>
        <input type="file" id="hmSign" onchange="previewHMSign()">
        <img id="hmSignPreview" style="width:100px; height:40px; border:1px solid #eee;">
      </div>
      <div class="field-group">
        <label>Parent/Guardian</label>
        <input type="file" id="parentSign" onchange="previewParentSign()">
        <img id="parentSignPreview" style="width:100px; height:40px; border:1px solid #eee;">
      </div>
    </div>

    <div style="margin-top: 10px; font-size: 10px;">
      <input type="checkbox" id="declaration"> I declare that the info provided is true and correct.
    </div>

    <div style="text-align:center;">
        <button type="submit">Save</button>
        <button type="button" onclick="printForm()">üñ®Ô∏è Print Form</button>
    </div>
  </form>
</div>

<script>
// Logic remains same, only updated to link to new IDs
function convertDOB() {
  const dob = document.getElementById("dob").value;
  if (!dob) return;
  const date = new Date(dob);
  const options = { day: 'numeric', month: 'long', year: 'numeric' };
  document.getElementById("dobWords").value = date.toLocaleDateString('en-IN', options);
}

function generateAdmissionDetails() {
  let year = new Date().getFullYear();
  let random = Math.floor(100 + Math.random() * 900);
  document.getElementById("admissionNo").value = "GPSPW-" + year + "-" + random;
  document.getElementById("admissionDate").value = new Date().toISOString().split("T")[0];
}

window.onload = generateAdmissionDetails;

function printForm() {
  window.print();
}

// Unified Preview Function
function previewImage(inputId, previewId) {
  let file = document.getElementById(inputId).files[0];
  let preview = document.getElementById(previewId);
  if (file) {
    let reader = new FileReader();
    reader.onload = function(e) {
      preview.src = e.target.result;
      preview.style.display = "block";
    };
    reader.readAsDataURL(file);
  }
}

function previewPhoto() { previewImage("studentPhoto", "photoPreview"); }
function previewParentSign() { previewImage("parentSign", "parentSignPreview"); }
function previewInchargeSign() { previewImage("inchargeSign", "inchargeSignPreview"); }
function previewHMSign() { previewImage("hmSign", "hmSignPreview"); }
</script>

</body>
</html>


