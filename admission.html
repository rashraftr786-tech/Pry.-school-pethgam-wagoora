<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admission Form - GPS Pethgam Wagoora</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --primary: #1b5e20; --border: #000; }
        body { font-family: 'Arial', sans-serif; background: #f0f0f0; padding: 20px; font-size: 13px; }
        .form-page { max-width: 950px; margin: auto; background: white; padding: 30px; border: 2px solid #000; position: relative; }
        
        /* Photo Upload Box */
        .photo-upload { position: absolute; top: 120px; right: 40px; width: 120px; height: 150px; border: 1px solid #000; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; background: #fafafa; }
        .photo-preview { width: 100%; height: 100%; object-fit: cover; display: none; }

        .header { text-align: center; border-bottom: 2px solid #000; margin-bottom: 10px; }
        .header h1 { margin: 0; font-size: 22px; text-transform: uppercase; }
        
        .field-row { display: flex; align-items: center; margin-bottom: 10px; gap: 10px; }
        .label { font-weight: bold; white-space: nowrap; }
        .dotted-input { border: none; border-bottom: 1px dotted #000; flex: 1; padding: 2px; outline: none; }
        
        /* Character Boxes for Aadhaar/Names */
        .box-container { display: flex; }
        .char-box { width: 18px; height: 18px; border: 1px solid #666; display: inline-block; margin-right: -1px; }
        .char-box input { width: 100%; height: 100%; border: none; text-align: center; text-transform: uppercase; font-size: 11px; }

        .section-head { font-weight: bold; text-decoration: underline; margin: 15px 0 10px 0; background: #eee; padding: 5px; }
        .doc-upload { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; background: #f9f9f9; padding: 15px; border: 1px solid #ccc; }
        
        .btn-footer { margin-top: 30px; display: flex; justify-content: flex-end; gap: 10px; }
        .btn { padding: 12px 25px; border: none; cursor: pointer; color: white; font-weight: bold; border-radius: 4px; }
        .btn-next { background: var(--primary); }
    </style>
</head>
<body>

<div class="form-page">
    <div class="header">
        <h1>Government Primary School Pethgam Wagoora</h1>
        <p>Wagoora Babareshi Road Near Zonal Education Office Wagoora</p>
        <p>UDISE Code: 01022202207 | Zone: Wagoora</p>
    </div>

    <div style="text-align: center; font-weight: bold; font-size: 18px; margin: 10px;">ADMISSION FORM</div>

    <div class="photo-upload" onclick="document.getElementById('photoInput').click()">
        <span id="photoLabel">Upload Photo</span>
        <img id="preview" class="photo-preview">
        <input type="file" id="photoInput" hidden accept="image/*" onchange="previewImage(this)">
    </div>

    <form id="admissionForm">
        <div class="field-row">
            <span class="label">Student's Name:</span>
            <div class="box-container" id="nameBoxes"></div>
        </div>

        <div class="field-row">
            <span class="label">Name As Per Aadhaar:</span>
            <div class="box-container" id="aadhaarNameBoxes"></div>
        </div>

        <div class="field-row">
            <span class="label">Father's Name:</span>
            <input type="text" class="dotted-input" name="fatherName">
        </div>

        <div class="field-row">
            <span class="label">Mother's Name:</span>
            <input type="text" class="dotted-input" name="motherName">
        </div>

        <div class="field-row">
            <span class="label">Mohallah:</span>
            <input type="text" class="dotted-input" name="mohallah">
            <span class="label">Village:</span>
            <input type="text" class="dotted-input" name="village">
        </div>

        <div class="field-row">
            <span class="label">Tehsil:</span>
            <input type="text" class="dotted-input" name="tehsil">
            <span class="label">District:</span>
            <input type="text" class="dotted-input" name="district" value="Baramulla">
            <span class="label">PIN:</span>
            <input type="text" class="dotted-input" name="pincode" value="193109" style="max-width: 80px;">
        </div>

        <div class="field-row">
            <span class="label">Aadhaar Number:</span>
            <div class="box-container" id="aadhaarNumBoxes"></div>
            <span class="label" style="margin-left:20px;">DOB:</span>
            <input type="date" name="dob" style="border:1px solid #ccc;">
        </div>

        <div class="field-row">
            <span class="label">Category:</span>
            <input type="radio" name="cat" value="SC"> SC 
            <input type="radio" name="cat" value="ST"> ST 
            <input type="radio" name="cat" value="OBC"> OBC 
            <input type="radio" name="cat" value="General"> General
            <span class="label" style="margin-left:20px;">Blood Group:</span>
            <input type="text" class="dotted-input" name="bloodGroup" style="max-width: 60px;">
        </div>

        <div class="field-row">
            <span class="label">Class Joining:</span>
            <select name="sclass" required>
                <option value="">Select Class</option>
                <option value="Pre-Primary 3">Pre-Primary 3</option>
                <option value="Pre-Primary 2">Pre-Primary 2</option>
                <option value="Balvatika">Balvatika</option>
                <option value="1st">1st</option>
                <option value="2nd">2nd</option>
                <option value="3rd">3rd</option>
                <option value="4th">4th</option>
                <option value="5th">5th</option>
            </select>
            <span class="label" style="margin-left:20px;">PEN Number:</span>
            <input type="text" class="dotted-input" name="penNumber">
        </div>

        <div class="field-row">
            <span class="label">APAAR ID:</span>
            <input type="text" class="dotted-input" name="apaarId">
        </div>

        <div class="section-head">ðŸ“Ž UPLOAD DOCUMENTS (Fresh Admission)</div>
        <div class="doc-upload">
            <div><label>Birth Certificate:</label> <input type="file" name="docBirth" required></div>
            <div><label>Blood Group Report:</label> <input type="file" name="docBlood" required></div>
            <div class="full-width"><label>Aadhaar Card:</label> <input type="file" name="docAadhaar" required></div>
        </div>

        <div style="margin-top: 20px; border: 1px solid #000; padding: 10px; background: #fffde7;">
            <input type="checkbox" id="declaration" required>
            <label for="declaration" style="font-weight: bold; font-size: 11px;">
                I hereby declare that the information provided is true to the best of my knowledge. I understand that I am giving consent to provide Aadhaar for demographic authentication and will abide by all school rules.
            </label>
        </div>

        <div class="btn-footer">
            <button type="button" class="btn btn-next" onclick="handleSubmit()">Submit & Proceed to APAAR Form</button>
        </div>
    </form>
</div>

<script>
    // Generate Boxes for Name and Aadhaar
    function createBoxes(id, count) {
        const container = document.getElementById(id);
        for(let i=0; i<count; i++) {
            const div = document.createElement('div');
            div.className = 'char-box';
            div.innerHTML = '<input type="text" maxlength="1">';
            container.appendChild(div);
        }
    }

    window.onload = () => {
        createBoxes('nameBoxes', 35);
        createBoxes('aadhaarNameBoxes', 35);
        createBoxes('aadhaarNumBoxes', 12);
    };

    function previewImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => {
                document.getElementById('preview').src = e.target.result;
                document.getElementById('preview').style.display = 'block';
                document.getElementById('photoLabel').style.display = 'none';
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function handleSubmit() {
        const form = document.getElementById('admissionForm');
        if(!form.checkValidity()) {
            alert("Please fill all required fields and check the declaration.");
            return;
        }

        // Logic to save data to register
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        
        let register = JSON.parse(localStorage.getItem('admissionData')) || [];
        register.push(data);
        localStorage.setItem('admissionData', JSON.stringify(register));

        // Redirect to APAAR form
        window.location.href = 'apaar-consent.html';
    }
</script>

</body>
</html>
            
