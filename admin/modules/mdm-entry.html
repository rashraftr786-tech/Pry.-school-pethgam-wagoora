<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MDM Expenditure Statement | GPS Pethgam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; }
            #reportContainer { border: none !important; box-shadow: none !important; width: 100%; }
        }
        table { width: 100%; border-collapse: collapse; font-size: 11px; }
        th, td { border: 1px solid black; padding: 4px; text-align: center; }
        .vertical-text { writing-mode: vertical-rl; transform: rotate(180deg); font-weight: bold; }
    </style>
</head>
<body class="bg-slate-100 p-4">

    <div class="max-w-6xl mx-auto bg-white p-6 rounded-3xl shadow-sm mb-8 no-print border-2 border-emerald-100">
        <h2 class="text-xl font-black text-emerald-700 mb-4 uppercase tracking-tighter">Report Data Entry</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
            <div class="space-y-3">
                <p class="text-[10px] font-black text-slate-400 uppercase">1. Period & Days</p>
                <input type="month" id="reportMonth" class="w-full p-2 bg-slate-50 rounded-lg border text-xs font-bold" onchange="updateReport()">
                <input type="number" id="workingDays" placeholder="Working Days" class="w-full p-2 bg-slate-50 rounded-lg border text-xs" oninput="updateReport()">
                <input type="number" id="mdmServedDays" placeholder="Days MDM Served" class="w-full p-2 bg-slate-50 rounded-lg border text-xs" oninput="updateReport()">
            </div>

            <div class="space-y-3 p-3 bg-orange-50/50 rounded-2xl border border-orange-100">
                <p class="text-[10px] font-black text-orange-600 uppercase">2. Pre-Primary (KG)</p>
                <input type="number" id="ppRoll" placeholder="Total Roll (KG)" class="w-full p-2 bg-white rounded-lg border text-xs" oninput="updateReport()">
                <input type="number" id="ppCovered" placeholder="Students Covered" class="w-full p-2 bg-white rounded-lg border text-xs" oninput="updateReport()">
                <input type="number" id="ppRice" step="0.001" placeholder="Rice Utilized (kg)" class="w-full p-2 bg-white rounded-lg border text-xs" oninput="updateReport()">
            </div>

            <div class="space-y-3 p-3 bg-blue-50/50 rounded-2xl border border-blue-100">
                <p class="text-[10px] font-black text-blue-600 uppercase">3. Primary (1st-5th)</p>
                <input type="number" id="pRoll" placeholder="Total Roll (Pri)" class="w-full p-2 bg-white rounded-lg border text-xs" oninput="updateReport()">
                <input type="number" id="pCovered" placeholder="Students Covered" class="w-full p-2 bg-white rounded-lg border text-xs" oninput="updateReport()">
                <input type="number" id="pRice" step="0.001" placeholder="Rice Utilized (kg)" class="w-full p-2 bg-white rounded-lg border text-xs" oninput="updateReport()">
            </div>

            <div class="flex flex-col justify-end gap-2">
                <button onclick="window.print()" class="w-full bg-emerald-600 text-white font-black py-3 rounded-xl hover:bg-emerald-700 transition-all uppercase text-xs">Print Statement</button>
                <p class="text-[9px] text-center text-slate-400 font-bold italic">Totals are auto-calculated below.</p>
            </div>
        </div>
    </div>

    <div id="reportContainer" class="max-w-[1100px] mx-auto bg-white p-10 shadow-2xl border border-slate-300">
        <div class="flex items-center justify-between mb-4 border-b-2 border-black pb-2">
            <img src="../../assets/logo.png" class="w-16 h-16 object-contain" alt="Logo">
            <div class="text-center flex-1">
                <p class="italic text-sm font-serif">Office of the Headmaster</p>
                <h1 class="text-2xl font-bold tracking-tight uppercase">Government Primary School Pethgam Wagoora</h1>
                <h3 class="text-md font-bold uppercase tracking-widest mt-1">Month Wise Expenditure Statement under MDM Scheme</h3>
            </div>
            <div class="w-16"></div>
        </div>

        <table>
            <thead class="bg-slate-50">
                <tr>
                    <th>Month</th>
                    <th>Scheme</th>
                    <th>Total Roll</th>
                    <th>Working Days</th>
                    <th>MDM Served</th>
                    <th>Students Covered</th>
                    <th>Meals Served</th>
                    <th>Opening Rice</th>
                    <th>Rice Lifted</th>
                    <th>Rice Utilized</th>
                    <th>Closing Rice</th>
                    <th>Opening Funds</th>
                    <th>Cooking Cost Utilized</th>
                    <th>Funds Received</th>
                    <th>Closing Funds</th>
                    <th>Cooks</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td rowspan="3" class="vertical-text" id="displayMonth">MONTH YEAR</td>
                    <td class="font-bold">Pre-Primary (Bal Vatika)</td>
                    <td id="cellPpRoll">0</td>
                    <td class="wDays">0</td>
                    <td class="sDays">0</td>
                    <td id="cellPpCovered">0</td>
                    <td id="cellPpMeals">0</td>
                    <td>-</td> <td>0.000</td>
                    <td id="cellPpRice">0.000</td>
                    <td>-</td>
                    <td>-</td>
                    <td id="cellPpCost">-</td>
                    <td>-</td>
                    <td>-</td>
                    <td rowspan="3" class="font-bold">1</td>
                </tr>
                <tr>
                    <td class="font-bold">Primary (1st-5th)</td>
                    <td id="cellPRoll">0</td>
                    <td class="wDays">0</td>
                    <td class="sDays">0</td>
                    <td id="cellPCovered">0</td>
                    <td id="cellPMeals">0</td>
                    <td>-</td>
                    <td>0.000</td>
                    <td id="cellPRice">0.000</td>
                    <td>-</td>
                    <td>-</td>
                    <td id="cellPCost">-</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
                <tr class="bg-slate-100 font-black">
                    <td>Total</td>
                    <td id="cellTotalRoll">0</td>
                    <td class="wDays">0</td>
                    <td class="sDays">0</td>
                    <td id="cellTotalCovered">0</td>
                    <td id="cellTotalMeals">0</td>
                    <td>-</td>
                    <td>0.000</td>
                    <td id="cellTotalRice">0.000</td>
                    <td>-</td>
                    <td>-</td>
                    <td id="cellTotalCost">0.00</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
            </tbody>
        </table>

        <div class="mt-8 flex justify-between items-end">
            <div class="text-[10px] space-y-1">
                <p><strong>MDM A/C:</strong> 0486040500000273</p>
                <p><strong>Cook:</strong> SHAHEENA BANO (0486040100006054)</p>
            </div>
            <div class="text-center">
                <div class="w-32 border-b border-black mb-1"></div>
                <p class="text-[10px] font-bold uppercase">Headmaster Signature</p>
            </div>
        </div>
    </div>

    <script>
        function updateReport() {
            // Get Month
            const monthInput = document.getElementById('reportMonth').value;
            if(monthInput) {
                const date = new Date(monthInput);
                const monthName = date.toLocaleString('default', { month: 'long' }).toUpperCase();
                document.getElementById('displayMonth').innerText = monthName + " " + date.getFullYear();
            }

            // Get Global Days
            const wDays = document.getElementById('workingDays').value || "0";
            const sDays = document.getElementById('mdmServedDays').value || "0";
            document.querySelectorAll('.wDays').forEach(el => el.innerText = wDays);
            document.querySelectorAll('.sDays').forEach(el => el.innerText = sDays);

            // Pre-Primary Math
            const ppRoll = parseInt(document.getElementById('ppRoll').value) || 0;
            const ppCovered = parseInt(document.getElementById('ppCovered').value) || 0;
            const ppRice = parseFloat(document.getElementById('ppRice').value) || 0;
            const ppCost = (ppCovered * 5.45).toFixed(2); // Example cooking cost rate

            document.getElementById('cellPpRoll').innerText = ppRoll;
            document.getElementById('cellPpCovered').innerText = ppCovered;
            document.getElementById('cellPpMeals').innerText = ppCovered;
            document.getElementById('cellPpRice').innerText = ppRice.toFixed(3);
            document.getElementById('cellPpCost').innerText = ppCost;

            // Primary Math
            const pRoll = parseInt(document.getElementById('pRoll').value) || 0;
            const pCovered = parseInt(document.getElementById('pCovered').value) || 0;
            const pRice = parseFloat(document.getElementById('pRice').value) || 0;
            const pCost = (pCovered * 8.17).toFixed(2); // Example cooking cost rate

            document.getElementById('cellPRoll').innerText = pRoll;
            document.getElementById('cellPCovered').innerText = pCovered;
            document.getElementById('cellPMeals').innerText = pCovered;
            document.getElementById('cellPRice').innerText = pRice.toFixed(3);
            document.getElementById('cellPCost').innerText = pCost;

            // Totals
            document.getElementById('cellTotalRoll').innerText = ppRoll + pRoll;
            document.getElementById('cellTotalCovered').innerText = ppCovered + pCovered;
            document.getElementById('cellTotalMeals').innerText = ppCovered + pCovered;
            document.getElementById('cellTotalRice').innerText = (ppRice + pRice).toFixed(3);
            document.getElementById('cellTotalCost').innerText = (parseFloat(ppCost) + parseFloat(pCost)).toFixed(2);
        }
    </script>
</body>
</html>
</html>
